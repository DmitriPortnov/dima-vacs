{"version":3,"sources":["service/context.js","components/hoc/service-hoc.js","actions/userActions.js","actions/errorActions.js","components/login/login.js","components/sign-up/signUp.js","pages/homePage.js","actions/vacation.Action.js","components/navbar/navbar.js","actions/logoutAction.js","components/vacation-card/vacationCard.js","components/vacation-full-page/vacation-full.js","pages/vacationsPage.js","components/vacation-editor/vacationEditor.js","pages/adminPage.js","pages/chartsPage.js","components/app/app.js","reducer/user.js","reducer/vacations.js","reducer/errorHandler.js","reducer/likes.js","reducer/index.js","components/error-indicator/error-indicator.js","components/error-boundry/error-boundry.js","service/service.js","index.js"],"names":["React","createContext","ProviderVacation","Provider","ConsumerVacation","Consumer","ServiceHoc","Wrapped","props","vacationService","service","userData","user","type","payload","userLikes","data","gotError","Login","state","username","password","this","error","expiredError","hasError","setTimeout","className","id","placeholder","value","onChange","target","setState","onKeyDown","event","key","login","message","onClick","to","loggedIn","then","catch","Component","connect","dispatch","ownProps","response","SignUp","firstname","lastname","required","registration","signUp","HomePage","isLoggedIn","isAdmin","prevProps","push","history","_id","permition","match","path","getVacations","vacations","Navbar","logout","nullUser","adminButtons","logoutBtn","chooseVacationID","chartBtn","adminBtn","secondFunction","userBtn","like","likes","find","vacId","vacation","VacationCard","imgUrl","src","alt","title","VacationDescription","closeDetailPage","image","description","VacationsPage","showVacationDetails","vacationID","getAllVacations","getUserLikes","userId","usersWatch","i","vacationId","userWatchFunc","err","console","log","getImage","undefined","img","map","vac","idx","getVacationDetails","usersLikeFunc","vacs","VacationEditor","field","sendVacation","closePage","htmlFor","files","sendVac","vacationDetails","AdminPage","editor","errorHandler","deleteVacation","getVacationDetailsForChange","deleteVac","ChartsPage","options","legend","display","maintainAspectRatio","length","color","getAllLikes","getLikes","chart","App","exact","component","userReducer","action","vacationsReducer","errorReducer","likeReducer","initialState","Reducer","ErrorIndicator","ErrorBoundry","isError","children","PATH","axios","post","toLowerCase","put","get","imgId","vacationData","vacData","FormData","config","append","headers","patch","delete","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2038cfb9.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst {\r\n    Provider: ProviderVacation,\r\n    Consumer: ConsumerVacation\r\n} = React.createContext();\r\n\r\nexport {\r\n    ProviderVacation,\r\n    ConsumerVacation\r\n}","import React from 'react';\r\nimport { ConsumerVacation } from '../../service/context';\r\n\r\nconst ServiceHoc = () => (Wrapped) => {\r\n    return (props) => {\r\n        return <ConsumerVacation>\r\n            {\r\n                (vacationService) => <Wrapped {...props} service={vacationService} />\r\n            }\r\n        </ConsumerVacation>\r\n    }\r\n}\r\n\r\nexport default ServiceHoc;","export const test = (user) => {\r\n    return {\r\n        type: 'TEST',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport const userData = (user) => {\r\n    return {\r\n        type: 'USER_DATA',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport const userLikes = (data) => {\r\n    return {\r\n        type: 'GET_LIKES',\r\n        payload: data\r\n    }\r\n}","export const gotError = (data) => {\r\n    return {\r\n        type: 'USER_ERROR',\r\n        payload: data\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport './login.css';\r\n\r\nimport { userData } from '../../actions/userActions';\r\nimport { gotError } from '../../actions/errorActions';\r\n\r\nclass Login extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { error, expiredError } = this.props;\r\n        if (error.hasError === true) {\r\n            setTimeout(() => expiredError(), 5000);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { username, password } = this.state;\r\n        const { error } = this.props;\r\n        return <div className=\"log-template\">\r\n            <h2>Login</h2>\r\n            <div className=\"form\">\r\n                <input type=\"text\" id=\"username\" placeholder=\"username\"\r\n                value={username} onChange={({ target }) => this.setState({username: target.value})} />\r\n                <input type=\"password\" id=\"password\" placeholder=\"password\"\r\n                value={password} onChange={({ target }) => this.setState({password: target.value})} \r\n                onKeyDown={(event) => event.key === 'Enter' ? this.props.login({ username, password }) : null }/>\r\n                { error.hasError ? <p className=\"error-text\">{error.message}</p> : null}\r\n                <button onClick={() => this.props.login({ username, password })}>Submit</button>\r\n                <p>not regestered yet? --> <Link to=\"/sign-up\"><strong>sign up</strong></Link></p>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.service.loggedIn().then(({data}) => this.props.loggedIn(data))\r\n        .catch(() => null);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { service: {login} } = ownProps;\r\n    return {\r\n        loggedIn: (user) => dispatch(userData(user)),\r\n        login: (user) => login(user).then(({data}) => {\r\n            dispatch(userData(data));\r\n        }).catch(({response: {data}}) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))),\r\n        expiredError: () => dispatch(gotError({\r\n            hasError: false, \r\n            message: ''\r\n        }))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport './signUp.css';\r\n\r\nimport { userData } from '../../actions/userActions';\r\nimport { gotError } from '../../actions/errorActions';\r\n\r\nclass SignUp extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            firstname: '',\r\n            lastname: ''\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { error, expiredError } = this.props;\r\n        if (error.hasError === true) {\r\n            setTimeout(() => expiredError(), 4000);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { error } = this.props;\r\n        const { username, firstname, lastname, password } = this.state;\r\n        return <div className=\"log-template\">\r\n            <h2>Sign Up</h2>\r\n            <div className=\"form\">\r\n                <input type=\"text\" value={firstname} onChange={({target}) => this.setState({firstname: target.value})}\r\n                placeholder=\"firstname\" required></input>\r\n                <input type=\"text\" value={lastname} onChange={({target}) => this.setState({lastname: target.value})}\r\n                placeholder=\"lastname\" required></input>\r\n                <input type=\"text\" value={username} onChange={({target}) => this.setState({username: target.value})}\r\n                placeholder=\"username\" required></input>\r\n                <input type=\"password\" value={password} onChange={({target}) => this.setState({password: target.value})}\r\n                onKeyDown={(event) => event.key === 'Enter' ? this.props.registration(this.state) : null }\r\n                placeholder=\"password\" required></input>\r\n                { error.hasError ? <p className=\"error-text\">{error.message}</p> : null}\r\n                <button onClick={() => this.props.registration(this.state)}>Submit</button>\r\n                <p>back to <Link to=\"/login\">Login</Link></p>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { service: { signUp } } = ownProps;\r\n    return {\r\n        registration: (user) => signUp(user).then(({data}) => dispatch(userData(data)))\r\n        .catch(({response: {data}}) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))),\r\n        expiredError: () => dispatch(gotError({\r\n            hasError: false, \r\n            message: ''\r\n        }))\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Login from '../components/login/login';\r\nimport SignUp from '../components/sign-up/signUp';\r\n\r\nclass HomePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            isAdmin: false\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { history: { push }} = this.props;\r\n        if (prevProps.user._id !== this.props.user._id || 0) {\r\n            if (this.props.user.permition === 1) {\r\n                return push('/editor')\r\n            } else {\r\n                return push('/vacations')\r\n            }\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        return <div className=\"home-page\">\r\n            <h1>see your next vacation!!!</h1>\r\n            { this.props.match.path === '/sign-up' ? <SignUp {...this.props}/> : <Login {...this.props}/> }\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, null)(HomePage));","export const getVacations = (vacations) => {\r\n    return {\r\n        type: 'GET_ALL_VACATIONS',\r\n        payload: vacations\r\n    }\r\n}","import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './navbar.css';\r\n\r\nimport { logout } from '../../actions/logoutAction';\r\nimport { gotError } from '../../actions/errorActions';\r\n\r\nclass Navbar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAdmin: false\r\n        }\r\n    }\r\n\r\n    logoutBtn() {\r\n        this.props.service.logout().then(() => {\r\n            this.props.nullUser();\r\n            this.props.history.push('/');\r\n        })\r\n    }\r\n\r\n    chartBtn() {\r\n        this.props.history.push('/charts');\r\n    }\r\n\r\n    render() {\r\n        const { firstname, lastname } = this.props.user;\r\n        return <nav>\r\n            <div className=\"nav-text\">\r\n                <h1>Vacations</h1>\r\n                <span>hello {firstname} {lastname}</span>\r\n            </div>\r\n            <div className=\"nav-buttons\">\r\n                { this.state.isAdmin ? this.adminButtons() : null }\r\n                <button className=\"logout-btn\" onClick={() => this.logoutBtn()}>\r\n                    <i className=\"material-icons\">power_settings_new</i>\r\n                </button>\r\n            </div>\r\n        </nav>\r\n    }\r\n\r\n    adminButtons() {\r\n        return <Fragment>\r\n            <button className=\"add-btn\" onClick={() => this.props.chooseVacationID()}>\r\n                <i className=\"material-icons\">add</i>\r\n            </button>\r\n            <button className=\"charts-btn\" onClick={() => this.chartBtn()}>\r\n                <i className=\"material-icons\">bar_chart</i>\r\n            </button>\r\n        </Fragment>\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { user, history } = this.props;\r\n        if (user.firstname === 'guest' && user._id === 0) {\r\n\r\n            history.push('/');\r\n        }\r\n        if (this.props.user.permition > 0) {\r\n            this.setState({\r\n                isAdmin: true\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        nullUser: () => dispatch(logout()),\r\n        gotError: (data) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);","export const logout = () => {\r\n    return {\r\n        type: 'RESET_STATE'\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport './vacationCard.css';\r\n\r\nconst VacationCard = (props) => {\r\n    const { vacation, permition, imgUrl } = props;\r\n    return <div className=\"card\">\r\n        <img src={imgUrl} alt=\"vacation_pic\"/>\r\n        <div className=\"card-title\">\r\n        <span>{ vacation.title }</span>\r\n        </div>\r\n        <div className=\"card-btn\">\r\n            { permition === 1 ? adminBtn(props) : userBtn(props) }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst adminBtn = (props) => {\r\n    return <Fragment>\r\n        <button onClick={() => props.chooseVacationID()}>\r\n            <i className=\"material-icons\">edit</i>\r\n        </button>\r\n        <button className=\"like-btn\" onClick={() => props.secondFunction()}>\r\n            <i className=\"material-icons\">delete</i>\r\n        </button>\r\n    </Fragment>\r\n}\r\n\r\nconst userBtn = (props) => {\r\n    const like = props.likes.find(({vacId}) => vacId === props.vacation._id);\r\n    return <Fragment>\r\n        <button onClick={() => props.chooseVacationID()}>\r\n            <i className=\"material-icons\">info</i>\r\n        </button>\r\n        <button className={!!like ? \"like-btn liked\": \"like-btn\"} onClick={() => props.secondFunction()}>\r\n            <i className=\"material-icons\">favorite_border</i>\r\n        </button>\r\n    </Fragment>\r\n}\r\n\r\nexport default VacationCard;","import React from 'react';\r\nimport './vacation-full.css';\r\n\r\nconst VacationDescription = (props) => {\r\n    const { vacation, closeDetailPage, imgUrl } = props;\r\n    return <div className=\"vacation-full-page\" onClick={() => closeDetailPage()}>\r\n        <div className=\"vacation-description\">\r\n            <div className=\"title-fullPage\">\r\n                <p>{ vacation.title }</p>\r\n                <button onClick={() => closeDetailPage()}>\r\n                    <i className=\"material-icons\">close</i>\r\n                </button>\r\n            </div>\r\n            <img src={imgUrl(vacation.image)} alt=\"vacation_pic\"/>\r\n            <div className=\"full-description\">\r\n                <p>{ vacation.description }</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default VacationDescription;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { userLikes } from '../actions/userActions';\r\nimport { getVacations } from '../actions/vacation.Action';\r\nimport { gotError } from '../actions/errorActions';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Navbar from '../components/navbar/navbar';\r\nimport VacationCard from '../components/vacation-card/vacationCard';\r\nimport VacationDescription from '../components/vacation-full-page/vacation-full';\r\n\r\nclass VacationsPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showVacationDetails: false,\r\n            vacationID: ''\r\n        }\r\n    }\r\n\r\n    getAllVacations() {\r\n        const { service: {getAllVacations}, getVacations } = this.props;\r\n        getAllVacations().then(({data}) => {getVacations(data)})\r\n        .catch(({response: {data}}) => {\r\n            this.props.gotError(data);\r\n            this.props.history.push('/');\r\n        });\r\n        this.getUserLikes(this.props.user._id);\r\n    }\r\n\r\n    getUserLikes(userId) {\r\n        this.props.service.usersWatch(userId).then(({data}) => {\r\n            this.props.userLikes(data);\r\n        });\r\n    }\r\n\r\n    getVacationDetails(i) {\r\n        this.setState({\r\n            showVacationDetails: true,\r\n            vacationID: i\r\n        });\r\n    }\r\n\r\n    closeDetailPage() {\r\n        this.setState({\r\n            showVacationDetails: false\r\n        });\r\n    }\r\n\r\n    usersLikeFunc(vacationId) {\r\n        const { user, likes, service: { userWatchFunc } } = this.props;\r\n        const like = likes.find(({vacId}) => vacationId === vacId);\r\n        userWatchFunc(user._id, vacationId, like).then(() => this.getUserLikes(user._id))\r\n        .catch((err) => console.log('likes error', err));\r\n    }\r\n\r\n    render() {\r\n        const { vacations, user: {permition}, likes, service: { getImage } } = this.props;\r\n        const { showVacationDetails, vacationID } = this.state;\r\n        if (vacations === null | undefined) {\r\n            return null;\r\n        }\r\n        return <div className=\"vacations-page\">\r\n            {showVacationDetails ? <VacationDescription vacation={vacations[vacationID]}\r\n            imgUrl={(img) => getImage(img)}\r\n            closeDetailPage={() => this.closeDetailPage()}/> : null}\r\n            <Navbar {...this.props}/>\r\n            <div className=\"vacations\">\r\n                {vacations.map((vac, idx) => <VacationCard vacation={vac} key={idx} permition={permition}\r\n                likes={likes}\r\n                imgUrl={getImage(vac.image)}\r\n                chooseVacationID={() => this.getVacationDetails(idx)}\r\n                secondFunction={() => this.usersLikeFunc(vac._id)}/>)}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAllVacations();\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getVacations: (vacs) => dispatch(getVacations(vacs)),\r\n        userLikes: (likes) => dispatch(userLikes(likes)),\r\n        gotError: (data) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, mapDispatchToProps)(VacationsPage));","import React, { Component } from 'react';\r\nimport './vacationEditor.css';\r\n\r\nclass VacationEditor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            _id: null,\r\n            title: '',\r\n            description: '',\r\n            image: ''\r\n        }\r\n    }\r\n\r\n    onChange(field, value) {\r\n        this.setState({\r\n            [field]: value\r\n        });\r\n    }\r\n\r\n    sendVac() {\r\n        this.props.service.sendVacation(this.state).then(() => {\r\n            this.props.closePage();\r\n        }).catch((err) => console.error(err));\r\n    }\r\n\r\n    render() {\r\n        const { title, description } = this.state;\r\n        return <div className=\"editor-page\">\r\n            <h2>vacation editor</h2>\r\n            <div className=\"vacation-editor\">\r\n                <input type=\"text\" placeholder=\"Title\" value={title} onChange={({target}) => this.onChange('title', target.value) }/>\r\n                <textarea placeholder=\"Description\" value={description} onChange={({target}) => this.onChange('description', target.value) }></textarea>\r\n                <label className=\"editor-file\" htmlFor=\"file-upload\">Choose your file</label>\r\n                <input id=\"file-upload\" type=\"file\" onChange={({target}) => this.onChange('image', target.files[0]) }></input>\r\n                <div className=\"btns\">\r\n                    <button className=\"submit-btn\" onClick={() => this.sendVac()}>submit</button>\r\n                    <button className=\"close-btn\" onClick={() => this.props.closePage()}>close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.vacationDetails === null) {\r\n            return null\r\n        }\r\n        const {_id, title, description, image} = this.props.vacationDetails;\r\n        this.setState({\r\n            _id,\r\n            title,\r\n            description,\r\n            image\r\n        });\r\n    }\r\n}\r\n\r\nexport default VacationEditor;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getVacations } from '../actions/vacation.Action';\r\nimport { gotError } from '../actions/errorActions';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Navbar from '../components/navbar/navbar';\r\nimport VacationEditor from '../components/vacation-editor/vacationEditor';\r\nimport VacationCard from '../components/vacation-card/vacationCard';\r\n\r\nclass AdminPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            vacationID: null,\r\n            editor: false\r\n        }\r\n    }\r\n\r\n    errorHandler(data) {\r\n        this.props.gotError(data);\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    getAllVacations() {\r\n        const { service: {getAllVacations}, getVacations } = this.props;\r\n        getAllVacations().then(({data}) => getVacations(data))\r\n        .catch(({response: {data}}) => this.errorHandler(data));\r\n    }\r\n\r\n    getVacationDetailsForChange() {\r\n        const { vacations } = this.props;\r\n        const { vacationID } = this.state;\r\n        return vacationID !== null ? vacations[vacationID] : null;\r\n    }\r\n\r\n    getVacationDetails(i=null) {\r\n        this.setState({\r\n            editor: true,\r\n            vacationID: i\r\n        });\r\n    }\r\n\r\n    closePage() {\r\n        this.getAllVacations();\r\n        this.setState({\r\n            editor: false,\r\n            vacationID: null\r\n        });\r\n    }\r\n\r\n    deleteVac(i) {\r\n        const id = this.props.vacations[i]._id;\r\n        this.props.service.deleteVacation(id).then(() => {\r\n            this.getAllVacations();\r\n        }).catch(({response: {data}}) => this.errorHandler(data));\r\n    }\r\n\r\n    render() {\r\n        const { user: {permition}, likes, vacations, service } = this.props;\r\n        const {editor} = this.state;\r\n        return <div className=\"admin-page\">\r\n            {editor ? <VacationEditor service={service} closePage={() => this.closePage()} vacationDetails={this.getVacationDetailsForChange()}/> : null}\r\n            <Navbar {...this.props} chooseVacationID={() => this.getVacationDetails()}/>\r\n            <div className=\"vacations\">\r\n                {vacations.map((vac, idx) => <VacationCard vacation={vac} key={idx} permition={permition}\r\n                likes={likes} imgUrl={service.getImage(vac.image)}\r\n                chooseVacationID={() => this.getVacationDetails(idx)}\r\n                secondFunction={() => this.deleteVac(idx)}/>)}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAllVacations();\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getVacations: (vacs) => dispatch(getVacations(vacs)),\r\n        gotError: (data) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, mapDispatchToProps)(AdminPage));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { userLikes } from '../actions/userActions';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport './pages-styles/pageStyle.css';\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\n\r\nclass ChartsPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            options: {\r\n                legend: {\r\n                    display: false\r\n                },\r\n                maintainAspectRatio: false\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const { likes } = this.props;\r\n        return <div className=\"chart-page\">\r\n            <h2>watch Chart</h2>\r\n            <div className=\"for-mobile\">\r\n                <p>please turn your phone</p>\r\n                <i className=\"aside material-icons\">aspect_ratio</i>\r\n            </div>\r\n            <div className=\"chart\">\r\n                {likes.length !== 0 ? <Bar data={likes} color='#AEB6BF' options={this.state.options}/>: \"there is no data to show\"}\r\n            </div>\r\n            <button className=\"go-back\"  onClick={() => this.props.history.push('/editor')}>go back</button>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.service.getAllLikes().then(({data}) => this.props.getLikes(data))\r\n        .catch(({response: {data}}) => console.error(data));\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getLikes: (chart) => dispatch(userLikes(chart))\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, mapDispatchToProps)(ChartsPage));","import React from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport './app.css';\r\n\r\nimport HomePage from '../../pages/homePage';\r\nimport VacationsPage from '../../pages/vacationsPage';\r\nimport AdminPage from '../../pages/adminPage';\r\nimport ChartsPage from '../../pages/chartsPage';\r\n \r\nconst App = () => {\r\n    \r\n    return <div className=\"main\">\r\n        <Switch>\r\n            <Route path='/' exact>\r\n                <Redirect to='/login'/>\r\n            </Route>\r\n            <Route path='/login' component={HomePage} />\r\n            <Route path='/sign-up' component={HomePage} />\r\n            <Route path='/vacations' component={VacationsPage}></Route>\r\n            <Route path='/editor' component={AdminPage}></Route>\r\n            <Route path='/charts' component={ChartsPage}></Route>\r\n        </Switch>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default App;","const userReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'TEST':\r\n            return action.payload;\r\n        case 'USER_DATA':\r\n            return action.payload;\r\n        default:\r\n            return state.user;\r\n    }\r\n}\r\n\r\nexport default userReducer;","const vacationsReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'GET_ALL_VACATIONS':\r\n            return action.payload;\r\n        default:\r\n            return state.vacations;\r\n    }\r\n}\r\n\r\nexport default vacationsReducer;","const errorReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'USER_ERROR':\r\n            return action.payload;\r\n        default:\r\n            return state.error\r\n    }\r\n}\r\n\r\nexport default errorReducer;","const likeReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case \"GET_LIKES\":\r\n            return action.payload;\r\n        default:\r\n            return state.likes;\r\n    }\r\n}\r\n\r\nexport default likeReducer;","import userReducer from './user';\r\nimport vacationsReducer from './vacations';\r\nimport errorReducer from './errorHandler';\r\nimport likeReducer from './likes';\r\n\r\nconst initialState = {\r\n    user: {\r\n        _id: 0,\r\n        username: '',\r\n        firstname: 'guest',\r\n        lastname: '',\r\n        permition: 0\r\n    },\r\n    vacations: [\r\n        {\r\n            _id: 0,\r\n            title: '',\r\n            description: '',\r\n            image: ''\r\n        }\r\n    ],\r\n    error: {\r\n        hasError: false,\r\n        message: ''\r\n    },\r\n    likes: []\r\n}\r\n\r\nconst Reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'RESET_STATE':\r\n            return initialState\r\n        default:\r\n            return {\r\n                user: userReducer(state, action),\r\n                vacations: vacationsReducer(state, action),\r\n                error: errorReducer(state, action),\r\n                likes: likeReducer(state, action)\r\n            }\r\n    }\r\n}\r\n\r\nexport default Reducer;","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = (props) => {\r\n    return <div className=\"error-indicator\">\r\n        <span>this is an Error line</span>\r\n    </div>\r\n}\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator/error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isError: false\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return this.state.isError ? <ErrorIndicator/> : this.props.children;\r\n    }\r\n}","import axios from 'axios';\r\n\r\nconst PATH = 'http://dima-vacs.herokuapp.com';\r\n// const PATH = 'http://localhost:3500';\r\n\r\nexport default class VacationService {\r\n    loggedIn() {\r\n        return axios.post(`${PATH}/user/loggedIn`);\r\n    }\r\n    \r\n    login(user) {\r\n        user.username = user.username.toLowerCase();\r\n        return axios.post(`${PATH}/user/login`, user);\r\n    }\r\n\r\n    signUp(user) {\r\n        return axios.put(`${PATH}/user/sign-up`, user);\r\n    }\r\n\r\n    logout() {\r\n        return axios.get(`${PATH}/user/logout`);\r\n    }\r\n\r\n    getAllVacations() {\r\n        return axios.get(`${PATH}/vacation`);\r\n    }\r\n\r\n    getImage(imgId) {\r\n        return `${PATH}/vacation/vacImg/${imgId}`;\r\n    }\r\n\r\n    sendVacation(vacationData) {\r\n        const vacData = new FormData();\r\n        const config = {'content-type': 'multipart/form-data'}\r\n        if (vacationData.title !== '' || vacationData.description !== '') {\r\n            if (typeof vacationData.image === 'object') {\r\n                vacData.append(\"image\", vacationData.image);\r\n            }\r\n            vacData.append('title', vacationData.title);\r\n            vacData.append('description', vacationData.description);\r\n        }\r\n        return vacationData._id === null ? axios.put(`${PATH}/vacation`, vacData, {headers: config}) : \r\n        axios.patch(`${PATH}/vacation/${vacationData._id}`, vacData, {headers: config});\r\n    }\r\n\r\n    deleteVacation(vacId) {\r\n        return axios.delete(`${PATH}/vacation/${vacId}`);\r\n    }\r\n\r\n    usersWatch(userId) {\r\n        return axios.get(`${PATH}/likes/${userId}`);\r\n    }\r\n\r\n    userWatchFunc(userId, vacId, like) {\r\n        return !!like ? axios.delete(`${PATH}/likes/${like.userId}/${like.vacId}`) : axios.put(`${PATH}/likes/${userId}/${vacId}`);\r\n    }\r\n\r\n    getAllLikes() {\r\n        return axios.get(`${PATH}/likes/chart-likes`)\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app/app';\r\nimport Reducer from './reducer/index';\r\nimport ErrorBoundry from './components/error-boundry/error-boundry';\r\nimport { ProviderVacation } from './service/context';\r\nimport VacationService from './service/service';\r\n\r\nconst vacationService = new VacationService();\r\nconst store = createStore(Reducer);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <ProviderVacation  value={vacationService}>\r\n                <Router>\r\n                    <App />\r\n                </Router>\r\n            </ProviderVacation>\r\n        </ErrorBoundry>\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n"],"sourceRoot":""}