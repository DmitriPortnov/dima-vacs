{"version":3,"sources":["service/context.js","components/hoc/service-hoc.js","actions/userActions.js","actions/errorActions.js","components/login/login.js","components/sign-up/signUp.js","pages/homePage.js","actions/vacation.Action.js","components/navbar/navbar.js","actions/logoutAction.js","components/vacation-card/vacationCard.js","components/vacation-full-page/vacation-full.js","pages/vacationsPage.js","components/vacation-editor/vacationEditor.js","pages/adminPage.js","pages/chartsPage.js","components/app/app.js","reducer/user.js","reducer/vacations.js","reducer/errorHandler.js","reducer/likes.js","reducer/index.js","components/error-indicator/error-indicator.js","components/error-boundry/error-boundry.js","service/service.js","index.js"],"names":["React","createContext","ProviderVacation","Provider","ConsumerVacation","Consumer","ServiceHoc","Wrapped","props","vacationService","service","userData","user","type","payload","gotError","data","Login","state","username","password","this","error","expiredError","hasError","setTimeout","className","id","placeholder","value","onChange","target","setState","onKeyDown","event","key","login","message","onClick","to","loggedIn","then","catch","response","console","Component","connect","dispatch","ownProps","SignUp","firstname","lastname","required","registration","signUp","HomePage","isLoggedIn","isAdmin","prevProps","push","history","_id","permition","match","path","getVacations","vacations","Navbar","logout","nullUser","adminButtons","logoutBtn","chooseVacationID","chartBtn","adminBtn","secondFunction","userBtn","like","likes","find","vacId","vacation","VacationCard","imgUrl","src","alt","title","VacationDescription","closeDetailPage","image","description","VacationsPage","showVacationDetails","vacationID","getAllVacations","getImage","getUserLikes","userId","usersWatch","userLikes","i","vacationId","userWatchFunc","err","log","undefined","img","map","vac","idx","getVacationDetails","usersLikeFunc","vacs","VacationEditor","field","sendVacation","closePage","htmlFor","files","sendVac","vacationDetails","AdminPage","editor","errorHandler","deleteVacation","getVacationDetailsForChange","deleteVac","App","exact","component","ChartsPage","userReducer","action","vacationsReducer","errorReducer","likeReducer","initialState","Reducer","ErrorIndicator","ErrorBoundry","isError","children","PATH","axios","post","toLowerCase","put","get","imgId","vacationData","vacData","FormData","config","append","headers","patch","delete","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f9a1db27.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst {\r\n    Provider: ProviderVacation,\r\n    Consumer: ConsumerVacation\r\n} = React.createContext();\r\n\r\nexport {\r\n    ProviderVacation,\r\n    ConsumerVacation\r\n}","import React from 'react';\r\nimport { ConsumerVacation } from '../../service/context';\r\n\r\nconst ServiceHoc = () => (Wrapped) => {\r\n    return (props) => {\r\n        return <ConsumerVacation>\r\n            {\r\n                (vacationService) => <Wrapped {...props} service={vacationService} />\r\n            }\r\n        </ConsumerVacation>\r\n    }\r\n}\r\n\r\nexport default ServiceHoc;","export const test = (user) => {\r\n    return {\r\n        type: 'TEST',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport const userData = (user) => {\r\n    return {\r\n        type: 'USER_DATA',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport const userLikes = (data) => {\r\n    return {\r\n        type: 'GET_LIKES',\r\n        payload: data\r\n    }\r\n}","export const gotError = (data) => {\r\n    return {\r\n        type: 'USER_ERROR',\r\n        payload: data\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport './login.css';\r\n\r\nimport { userData } from '../../actions/userActions';\r\nimport { gotError } from '../../actions/errorActions';\r\n\r\nclass Login extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { error, expiredError } = this.props;\r\n        if (error.hasError === true) {\r\n            setTimeout(() => expiredError(), 5000);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { username, password } = this.state;\r\n        const { error } = this.props;\r\n        return <div className=\"log-template\">\r\n            <h2>Login</h2>\r\n            <div className=\"form\">\r\n                <input type=\"text\" id=\"username\" placeholder=\"username\"\r\n                value={username} onChange={({ target }) => this.setState({username: target.value})} />\r\n                <input type=\"password\" id=\"password\" placeholder=\"password\"\r\n                value={password} onChange={({ target }) => this.setState({password: target.value})} \r\n                onKeyDown={(event) => event.key === 'Enter' ? this.props.login({ username, password }) : null }/>\r\n                { error.hasError ? <p className=\"error-text\">{error.message}</p> : null}\r\n                <button onClick={() => this.props.login({ username, password })}>Submit</button>\r\n                <p>not regestered yet? --> <Link to=\"/sign-up\"><strong>sign up</strong></Link></p>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.service.loggedIn().then(({data}) => this.props.loggedIn(data))\r\n        .catch(({response: {data}}) => console.error(\"login error\", data));\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { service: {login} } = ownProps;\r\n    return {\r\n        loggedIn: (user) => dispatch(userData(user)),\r\n        login: (user) => login(user).then(({data}) => {\r\n            dispatch(userData(data));\r\n        }).catch(({response: {data}}) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))),\r\n        expiredError: () => dispatch(gotError({\r\n            hasError: false, \r\n            message: ''\r\n        }))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport './signUp.css';\r\n\r\nimport { userData } from '../../actions/userActions';\r\nimport { gotError } from '../../actions/errorActions';\r\n\r\nclass SignUp extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            firstname: '',\r\n            lastname: ''\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { error, expiredError } = this.props;\r\n        if (error.hasError === true) {\r\n            setTimeout(() => expiredError(), 4000);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { error } = this.props;\r\n        const { username, firstname, lastname, password } = this.state;\r\n        return <div className=\"log-template\">\r\n            <h2>Sign Up</h2>\r\n            <div className=\"form\">\r\n                <input type=\"text\" value={firstname} onChange={({target}) => this.setState({firstname: target.value})}\r\n                placeholder=\"firstname\" required></input>\r\n                <input type=\"text\" value={lastname} onChange={({target}) => this.setState({lastname: target.value})}\r\n                placeholder=\"lastname\" required></input>\r\n                <input type=\"text\" value={username} onChange={({target}) => this.setState({username: target.value})}\r\n                placeholder=\"username\" required></input>\r\n                <input type=\"password\" value={password} onChange={({target}) => this.setState({password: target.value})}\r\n                onKeyDown={(event) => event.key === 'Enter' ? this.props.registration(this.state) : null }\r\n                placeholder=\"password\" required></input>\r\n                { error.hasError ? <p className=\"error-text\">{error.message}</p> : null}\r\n                <button onClick={() => this.props.registration(this.state)}>Submit</button>\r\n                <p>back to <Link to=\"/login\">Login</Link></p>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { service: { signUp } } = ownProps;\r\n    return {\r\n        registration: (user) => signUp(user).then(({data}) => dispatch(userData(data)))\r\n        .catch(({response: {data}}) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))),\r\n        expiredError: () => dispatch(gotError({\r\n            hasError: false, \r\n            message: ''\r\n        }))\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Login from '../components/login/login';\r\nimport SignUp from '../components/sign-up/signUp';\r\n\r\nclass HomePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            isAdmin: false\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { history: { push }} = this.props;\r\n        if (prevProps.user._id !== this.props.user._id || 0) {\r\n            if (this.props.user.permition === 1) {\r\n                return push('/editor')\r\n            } else {\r\n                return push('/vacations')\r\n            }\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        return <div className=\"home-page\">\r\n            <h1>see your next vacation!!!</h1>\r\n            { this.props.match.path === '/sign-up' ? <SignUp {...this.props}/> : <Login {...this.props}/> }\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, null)(HomePage));","export const getVacations = (vacations) => {\r\n    return {\r\n        type: 'GET_ALL_VACATIONS',\r\n        payload: vacations\r\n    }\r\n}","import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './navbar.css';\r\n\r\nimport { logout } from '../../actions/logoutAction';\r\n\r\nclass Navbar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAdmin: false\r\n        }\r\n    }\r\n\r\n    logoutBtn() {\r\n        this.props.service.logout().then(() => {\r\n            this.props.nullUser();\r\n            this.props.history.push('/');\r\n        })\r\n    }\r\n\r\n    chartBtn() {\r\n        this.props.history.push('/charts');\r\n    }\r\n\r\n    render() {\r\n        const { firstname, lastname } = this.props.user;\r\n        return <nav>\r\n            <div className=\"nav-text\">\r\n                <h1>Vacations</h1>\r\n                <span>hello {firstname} {lastname}</span>\r\n            </div>\r\n            <div className=\"nav-buttons\">\r\n                { this.state.isAdmin ? this.adminButtons() : null }\r\n                <button className=\"logout-btn\" onClick={() => this.logoutBtn()}>\r\n                    <i className=\"material-icons\">power_settings_new</i>\r\n                </button>\r\n            </div>\r\n        </nav>\r\n    }\r\n\r\n    adminButtons() {\r\n        return <Fragment>\r\n            <button className=\"add-btn\" onClick={() => this.props.chooseVacationID()}>\r\n                <i className=\"material-icons\">add</i>\r\n            </button>\r\n            <button className=\"charts-btn\" onClick={() => this.chartBtn()}>\r\n                <i className=\"material-icons\">bar_chart</i>\r\n            </button>\r\n        </Fragment>\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.user.permition >= 1) {\r\n            this.setState({\r\n                isAdmin: true\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        nullUser: () => dispatch(logout())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);","export const logout = () => {\r\n    return {\r\n        type: 'RESET_STATE'\r\n    }\r\n}","import React, { Fragment } from 'react';\r\nimport './vacationCard.css';\r\n\r\nconst VacationCard = (props) => {\r\n    const { vacation, permition, imgUrl } = props;\r\n    return <div className=\"card\">\r\n        <img src={imgUrl} alt=\"vacation_pic\"/>\r\n        <div className=\"card-title\">\r\n        <span>{ vacation.title }</span>\r\n        </div>\r\n        <div className=\"card-btn\">\r\n            { permition === 1 ? adminBtn(props) : userBtn(props) }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst adminBtn = (props) => {\r\n    return <Fragment>\r\n        <button onClick={() => props.chooseVacationID()}>\r\n            <i className=\"material-icons\">edit</i>\r\n        </button>\r\n        <button className=\"like-btn\" onClick={() => props.secondFunction()}>\r\n            <i className=\"material-icons\">delete</i>\r\n        </button>\r\n    </Fragment>\r\n}\r\n\r\nconst userBtn = (props) => {\r\n    const like = props.likes.find(({vacId}) => vacId === props.vacation._id);\r\n    return <Fragment>\r\n        <button onClick={() => props.chooseVacationID()}>\r\n            <i className=\"material-icons\">info</i>\r\n        </button>\r\n        <button className={!!like ? \"like-btn liked\": \"like-btn\"} onClick={() => props.secondFunction()}>\r\n            <i className=\"material-icons\">favorite_border</i>\r\n        </button>\r\n    </Fragment>\r\n}\r\n\r\nexport default VacationCard;","import React from 'react';\r\nimport './vacation-full.css';\r\n\r\nconst VacationDescription = (props) => {\r\n    const { vacation, closeDetailPage, imgUrl } = props;\r\n    return <div className=\"vacation-full-page\" onClick={() => closeDetailPage()}>\r\n        <div className=\"vacation-description\">\r\n            <div className=\"title-fullPage\">\r\n                <p>{ vacation.title }</p>\r\n                <button onClick={() => closeDetailPage()}>\r\n                    <i className=\"material-icons\">close</i>\r\n                </button>\r\n            </div>\r\n            <img src={imgUrl(vacation.image)} alt=\"vacation_pic\"/>\r\n            <div className=\"full-description\">\r\n                <p>{ vacation.description }</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default VacationDescription;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { userLikes } from '../actions/userActions';\r\nimport { getVacations } from '../actions/vacation.Action';\r\nimport { gotError } from '../actions/errorActions';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Navbar from '../components/navbar/navbar';\r\nimport VacationCard from '../components/vacation-card/vacationCard';\r\nimport VacationDescription from '../components/vacation-full-page/vacation-full';\r\n\r\nclass VacationsPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showVacationDetails: false,\r\n            vacationID: ''\r\n        }\r\n    }\r\n\r\n    getAllVacations() {\r\n        const { service: {getAllVacations, getImage}, getVacations } = this.props;\r\n        getAllVacations().then(({data}) => {getVacations(data)})\r\n        .catch(({response: {data}}) => {\r\n            this.props.gotError(data);\r\n            this.props.history.push('/');\r\n        });\r\n        this.getUserLikes(this.props.user._id);\r\n    }\r\n\r\n    getUserLikes(userId) {\r\n        this.props.service.usersWatch(userId).then(({data}) => {\r\n            this.props.userLikes(data);\r\n        });\r\n    }\r\n\r\n    getVacationDetails(i) {\r\n        this.setState({\r\n            showVacationDetails: true,\r\n            vacationID: i\r\n        });\r\n    }\r\n\r\n    closeDetailPage() {\r\n        this.setState({\r\n            showVacationDetails: false\r\n        });\r\n    }\r\n\r\n    usersLikeFunc(vacationId) {\r\n        const { user, likes, service: { userWatchFunc } } = this.props;\r\n        const like = likes.find(({vacId}) => vacationId === vacId);\r\n        userWatchFunc(user._id, vacationId, like).then(() => this.getUserLikes(user._id))\r\n        .catch((err) => console.log('likes error', err));\r\n    }\r\n\r\n    render() {\r\n        const { vacations, user: {permition}, likes, service: { getImage } } = this.props;\r\n        const { showVacationDetails, vacationID } = this.state;\r\n        if (vacations === null | undefined) {\r\n            return null;\r\n        }\r\n        return <div className=\"vacations-page\">\r\n            {showVacationDetails ? <VacationDescription vacation={vacations[vacationID]}\r\n            imgUrl={(img) => getImage(img)}\r\n            closeDetailPage={() => this.closeDetailPage()}/> : null}\r\n            <Navbar {...this.props}/>\r\n            <div className=\"vacations\">\r\n                {vacations.map((vac, idx) => <VacationCard vacation={vac} key={idx} permition={permition}\r\n                likes={likes}\r\n                imgUrl={getImage(vac.image)}\r\n                chooseVacationID={() => this.getVacationDetails(idx)}\r\n                secondFunction={() => this.usersLikeFunc(vac._id)}/>)}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAllVacations();\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getVacations: (vacs) => dispatch(getVacations(vacs)),\r\n        userLikes: (likes) => dispatch(userLikes(likes)),\r\n        gotError: (data) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, mapDispatchToProps)(VacationsPage));","import React, { Component } from 'react';\r\nimport './vacationEditor.css';\r\n\r\nclass VacationEditor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            _id: 0,\r\n            title: '',\r\n            description: '',\r\n            image: ''\r\n        }\r\n    }\r\n\r\n    onChange(field, value) {\r\n        this.setState({\r\n            [field]: value\r\n        });\r\n    }\r\n\r\n    sendVac() {\r\n        this.props.service.sendVacation(this.state).then(() => {\r\n            this.props.closePage();\r\n        }).catch((err) => console.error(err));\r\n    }\r\n\r\n    render() {\r\n        const { title, description } = this.state;\r\n        return <div className=\"editor-page\">\r\n            <h2>vacation editor</h2>\r\n            <div className=\"vacation-editor\">\r\n                <input type=\"text\" placeholder=\"Title\" value={title} onChange={({target}) => this.onChange('title', target.value) }/>\r\n                <textarea placeholder=\"Description\" value={description} onChange={({target}) => this.onChange('description', target.value) }></textarea>\r\n                <label className=\"editor-file\" htmlFor=\"file-upload\">Choose your file</label>\r\n                <input id=\"file-upload\" type=\"file\" onChange={({target}) => this.onChange('image', target.files[0]) }></input>\r\n                <div className=\"btns\">\r\n                    <button className=\"submit-btn\" onClick={() => this.sendVac()}>submit</button>\r\n                    <button className=\"close-btn\" onClick={() => this.props.closePage()}>close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.vacationDetails === null) {\r\n            return null\r\n        }\r\n        const {_id, title, description, image} = this.props.vacationDetails;\r\n        this.setState({\r\n            _id,\r\n            title,\r\n            description,\r\n            image\r\n        });\r\n    }\r\n}\r\n\r\nexport default VacationEditor;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getVacations } from '../actions/vacation.Action';\r\nimport { gotError } from '../actions/errorActions';\r\nimport './pages-styles/pageStyle.css';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\nimport Navbar from '../components/navbar/navbar';\r\nimport VacationEditor from '../components/vacation-editor/vacationEditor';\r\nimport VacationCard from '../components/vacation-card/vacationCard';\r\n\r\nclass AdminPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            vacationID: 0,\r\n            editor: false\r\n        }\r\n    }\r\n\r\n    errorHandler(data) {\r\n        this.props.gotError(data);\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    getAllVacations() {\r\n        const { service: {getAllVacations}, getVacations } = this.props;\r\n        getAllVacations().then(({data}) => getVacations(data))\r\n        .catch(({response: {data}}) => this.errorHandler(data));\r\n    }\r\n\r\n    getVacationDetailsForChange() {\r\n        const { vacations } = this.props;\r\n        const { vacationID } = this.state;\r\n        return vacationID ? vacations[vacationID] : null;\r\n    }\r\n\r\n    getVacationDetails(i=null) {\r\n        this.setState({\r\n            editor: true,\r\n            vacationID: i,\r\n        });\r\n    }\r\n\r\n    closePage() {\r\n        this.getAllVacations();\r\n        this.setState({\r\n            editor: false\r\n        });\r\n    }\r\n\r\n    deleteVac(i) {\r\n        const id = this.props.vacations[i]._id;\r\n        this.props.service.deleteVacation(id).then(() => {\r\n            this.getAllVacations();\r\n        }).catch(({response: {data}}) => this.errorHandler(data));\r\n    }\r\n\r\n    render() {\r\n        const { user: {permition}, likes, vacations, service } = this.props;\r\n        const {editor} = this.state;\r\n        return <div className=\"admin-page\">\r\n            {editor ? <VacationEditor service={service} closePage={() => this.closePage()} vacationDetails={this.getVacationDetailsForChange()}/> : null}\r\n            <Navbar {...this.props} chooseVacationID={() => this.getVacationDetails()}/>\r\n            <div className=\"vacations\">\r\n                {vacations.map((vac, idx) => <VacationCard vacation={vac} key={idx} permition={permition}\r\n                likes={likes} imgUrl={service.getImage(vac.image)}\r\n                chooseVacationID={() => this.getVacationDetails(idx)}\r\n                secondFunction={() => this.deleteVac(idx)}/>)}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAllVacations();\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return state;\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getVacations: (vacs) => dispatch(getVacations(vacs)),\r\n        gotError: (data) => dispatch(gotError({\r\n            hasError: true, \r\n            message: data.message\r\n        }))\r\n    }\r\n}\r\n\r\nexport default ServiceHoc()(connect(mapStateToProps, mapDispatchToProps)(AdminPage));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ServiceHoc from '../components/hoc/service-hoc';\r\n\r\nconst ChartsPage = (props) => {\r\n\r\n    return <div>\r\n        this page are not available right now\r\n    </div>\r\n}\r\n\r\nexport default ServiceHoc()(connect()(ChartsPage));","import React from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport './app.css';\r\n\r\nimport HomePage from '../../pages/homePage';\r\nimport VacationsPage from '../../pages/vacationsPage';\r\nimport AdminPage from '../../pages/adminPage';\r\nimport ChartsPage from '../../pages/chartsPage';\r\n \r\nconst App = () => {\r\n    \r\n    return <div className=\"main\">\r\n        <Switch>\r\n            <Route path='/' exact>\r\n                <Redirect to='/login'/>\r\n            </Route>\r\n            <Route path='/login' component={HomePage} />\r\n            <Route path='/sign-up' component={HomePage} />\r\n            <Route path='/vacations' component={VacationsPage}></Route>\r\n            <Route path='/editor' component={AdminPage}></Route>\r\n            <Route path='/charts' component={ChartsPage}></Route>\r\n        </Switch>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default App;","const userReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'TEST':\r\n            return action.payload;\r\n        case 'USER_DATA':\r\n            return action.payload;\r\n        default:\r\n            return state.user;\r\n    }\r\n}\r\n\r\nexport default userReducer;","const vacationsReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'GET_ALL_VACATIONS':\r\n            return action.payload;\r\n        default:\r\n            return state.vacations;\r\n    }\r\n}\r\n\r\nexport default vacationsReducer;","const errorReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'USER_ERROR':\r\n            return action.payload;\r\n        default:\r\n            return state.error\r\n    }\r\n}\r\n\r\nexport default errorReducer;","const likeReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case \"GET_LIKES\":\r\n            return action.payload;\r\n        default:\r\n            return state.likes;\r\n    }\r\n}\r\n\r\nexport default likeReducer;","import userReducer from './user';\r\nimport vacationsReducer from './vacations';\r\nimport errorReducer from './errorHandler';\r\nimport likeReducer from './likes';\r\n\r\nconst initialState = {\r\n    user: {\r\n        _id: 0,\r\n        username: '',\r\n        firstname: 'guest',\r\n        lastname: '',\r\n        permition: 0\r\n    },\r\n    vacations: [\r\n        {\r\n            _id: 0,\r\n            title: '',\r\n            description: '',\r\n            image: ''\r\n        }\r\n    ],\r\n    error: {\r\n        hasError: false,\r\n        message: ''\r\n    },\r\n    likes: []\r\n}\r\n\r\nconst Reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'RESET_STATE':\r\n            return initialState\r\n        default:\r\n            return {\r\n                user: userReducer(state, action),\r\n                vacations: vacationsReducer(state, action),\r\n                error: errorReducer(state, action),\r\n                likes: likeReducer(state, action)\r\n            }\r\n    }\r\n}\r\n\r\nexport default Reducer;","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = (props) => {\r\n    return <div className=\"error-indicator\">\r\n        <span>this is an Error line</span>\r\n    </div>\r\n}\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator/error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isError: false\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return this.state.isError ? <ErrorIndicator/> : this.props.children;\r\n    }\r\n}","import axios from 'axios';\r\n\r\n// const PATH = 'https://dima-vacs.herokuapp.com';\r\nconst PATH = 'http://localhost:3500';\r\n\r\nexport default class VacationService {\r\n    loggedIn() {\r\n        return axios.post(`${PATH}/user/loggedIn`);\r\n    }\r\n    \r\n    login(user) {\r\n        user.username = user.username.toLowerCase();\r\n        return axios.post(`${PATH}/user/login`, user);\r\n    }\r\n\r\n    signUp(user) {\r\n        return axios.put(`${PATH}/user/sign-up`, user);\r\n    }\r\n\r\n    logout() {\r\n        return axios.get(`${PATH}/user/logout`);\r\n    }\r\n\r\n    getAllVacations() {\r\n        return axios.get(`${PATH}/vacation`);\r\n    }\r\n\r\n    getImage(imgId) {\r\n        return `${PATH}/vacation/vacImg/${imgId}`;\r\n    }\r\n\r\n    sendVacation(vacationData) {\r\n        console.log('sendVacation', vacationData);\r\n        console.log(typeof vacationData.image)\r\n        const vacData = new FormData();\r\n        const config = {'content-type': 'multipart/form-data'}\r\n        if (vacationData.title !== '' || vacationData.description !== '') {\r\n            if (typeof vacationData.image === 'object') {\r\n                console.log('file added')\r\n                vacData.append(\"image\", vacationData.image);\r\n            }\r\n            vacData.append('title', vacationData.title);\r\n            vacData.append('description', vacationData.description);\r\n        }\r\n        return vacationData._id === 0 ?  axios.put(`${PATH}/vacation`, vacData, {headers: config}) : \r\n        axios.patch(`${PATH}/vacation/${vacationData._id}`, vacData, {headers: config});\r\n    }\r\n\r\n    deleteVacation(vacId) {\r\n        return axios.delete(`${PATH}/vacation/${vacId}`);\r\n    }\r\n\r\n    usersWatch(userId) {\r\n        return axios.get(`${PATH}/likes/${userId}`);\r\n    }\r\n\r\n    userWatchFunc(userId, vacId, like) {\r\n        return !!like ? axios.delete(`${PATH}/likes/${like.userId}/${like.vacId}`) : axios.put(`${PATH}/likes/${userId}/${vacId}`);\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app/app';\r\nimport Reducer from './reducer/index';\r\nimport ErrorBoundry from './components/error-boundry/error-boundry';\r\nimport { ProviderVacation } from './service/context';\r\nimport VacationService from './service/service';\r\n\r\nconst vacationService = new VacationService();\r\nconst store = createStore(Reducer);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <ProviderVacation  value={vacationService}>\r\n                <Router>\r\n                    <App />\r\n                </Router>\r\n            </ProviderVacation>\r\n        </ErrorBoundry>\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n"],"sourceRoot":""}